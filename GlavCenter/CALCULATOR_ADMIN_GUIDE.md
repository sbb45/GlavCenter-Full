# Руководство по управлению калькулятором через Keystone

## Обзор

Теперь калькулятор полностью управляется через Keystone админку. Администратор может изменять все тексты, настройки и опции калькулятора без необходимости редактирования кода.

## Доступ к настройкам

1. Откройте Keystone админку: `http://localhost:4000/admin`
2. В левом меню найдите раздел **"Настройки калькулятора"**
3. Создайте новую конфигурацию или отредактируйте существующую

## Настройки калькулятора

### Основная информация
- **Название конфигурации** - название для идентификации конфигурации
- **Статус** - выберите "Активна" для использования этой конфигурации

### Заголовки вопросов
- **Заголовок вопроса о просрочках** - текст вопроса "Имеются ли просрочки?"
- **Заголовок поля суммы долга** - текст для поля "Сумма долга"
- **Заголовок поля месячного платежа** - текст для поля "Месячный платёж"
- **Заголовок вопроса о кредиторах** - текст вопроса "Перед кем долги?"

### Максимальные значения
- **Максимальная сумма долга** - максимальное значение для слайдера долга (в рублях)
- **Максимальный месячный платёж** - максимальное значение для слайдера платежа (в рублях)

### Варианты ответов
- **Варианты ответов о просрочках** - массив строк с вариантами ответов
  - По умолчанию: `["<1 месяца", ">1 месяца", ">6 месяцев", ">1 года", "Плачу вовремя"]`
  - Можно добавлять, удалять или изменять варианты

- **Варианты кредиторов** - массив строк с типами кредиторов
  - По умолчанию: `["МФО", "Штрафы", "Налоги", "Банки", "ЖКХ", "Другой вариант"]`
  - Можно добавлять новые типы кредиторов (например, "Знакомым", "Микрофинансовым организациям")

### Тексты кнопок и модального окна
- **Текст кнопки отправки** - текст кнопки "Расчитать стоимость"
- **Заголовок модального окна** - заголовок "Поздравляем!"
- **Подзаголовок модального окна** - основной текст модального окна
- **Описание в модальном окне** - дополнительное описание
- **Инструкция в модальном окне** - инструкция для пользователя
- **Текст кнопки отправки в модальном окне** - текст кнопки "Отправить заявку"

## Как добавить новый тип кредитора

1. Откройте активную конфигурацию калькулятора
2. Найдите поле **"Варианты кредиторов"**
3. Добавьте новый элемент в массив, например: `"Знакомым"`
4. Сохраните изменения

## Важные замечания

- **Только одна активная конфигурация**: В системе может быть только одна активная конфигурация. При создании новой активной конфигурации, предыдущая автоматически станет неактивной.

- **Формат JSON**: Поля с вариантами ответов используют JSON формат. Убедитесь, что синтаксис корректен:
  ```json
  ["МФО", "Штрафы", "Налоги", "Банки", "ЖКХ", "Знакомым", "Другой вариант"]
  ```

- **Мгновенная загрузка**: Калькулятор теперь загружается мгновенно с дефолтными значениями, а затем обновляется данными из Keystone при их получении.

- **Fallback значения**: Если Keystone недоступен или нет активной конфигурации, используются стандартные дефолтные значения.

## Примеры использования

### Добавление нового типа кредитора
```json
["МФО", "Штрафы", "Налоги", "Банки", "ЖКХ", "Знакомым", "Работодателю", "Другой вариант"]
```

### Изменение максимальных значений
- Максимальная сумма долга: `2000000` (2 миллиона рублей)
- Максимальный месячный платёж: `50000` (50 тысяч рублей)

### Кастомизация текстов
- Заголовок: "Есть ли у вас задолженности?"
- Кнопка: "Рассчитать возможность списания"
- Модальное окно: "Отличные новости! Ваши долги можно списать законно"

## Техническая информация

- API endpoint: `/api/calculator/config`
- Хук для получения конфигурации: `useCalculatorConfig()`
- Автоматическое кэширование и fallback на дефолтные значения
- Поддержка TypeScript с полной типизацией
